
# behat.yml
default:
    formatters:
        pretty: true
        junit:
            output_path: ./tests/functional/results/junit

    suites:
        default:
            paths:
                features: ./functional
            contexts:
                - App\Tests\FeatureContext:
                    kernel: '@kernel'
                    jwtManager: '@lexik_jwt_authentication.jwt_manager'
                    encoder: '@security.user_password_encoder.generic'
                - Behat\MinkExtension\Context\MinkContext
                - Behatch\Context\RestContext
                - Behatch\Context\JsonContext

    extensions:
        Behat\Symfony2Extension:
            kernel:
                bootstrap: bootstrap.php
                class: App\Kernel

        Behat\MinkExtension:
            show_auto: true
            show_cmd: firefox %s
            base_url: "http://localhost"
            sessions:
                default:
                    symfony2: ~

        Behatch\Extension: ~

        LeanPHP\Behat\CodeCoverage\Extension:
            drivers:
                - local
            filter:
                whitelist:
                    include:
                        directories:
                            src: ~
                    exclude:
                        directories:
                            src/Migrations: ~
                        files:
                            - src/Kernel.php
            report:
                format: html
                options:
                    target: tests/functional/results/html
